<div class="tool-content">
  <h2>Fly-By Turn</h2>
  <p class="tool-description">
    Calculate waypoint turn anticipation (lead distance) and turn radius using inbound/outbound
    track, bank angle, and ground speed.
  </p>

  <div class="input-group">
    <label for="inbound-track">Inbound Track (deg)</label>
    <input
      type="number"
      id="inbound-track"
      placeholder="e.g., 090"
      step="1"
      min="0"
      max="360"
      [formControl]="inboundTrackControl"
      (keydown.enter)="calculate()"
    >
  </div>

  <div class="input-group">
    <label for="outbound-track">Outbound Track (deg)</label>
    <input
      type="number"
      id="outbound-track"
      placeholder="e.g., 135"
      step="1"
      min="0"
      max="360"
      [formControl]="outboundTrackControl"
      (keydown.enter)="calculate()"
    >
  </div>

  <div class="input-group">
    <label for="bank-angle">Bank Angle (deg)</label>
    <input
      type="number"
      id="bank-angle"
      placeholder="e.g., 25"
      step="0.1"
      min="0.1"
      max="89.9"
      [formControl]="bankAngleControl"
      (keydown.enter)="calculate()"
    >
  </div>

  <div class="input-group">
    <label for="ground-speed">Ground Speed (kt)</label>
    <input
      type="number"
      id="ground-speed"
      placeholder="e.g., 180"
      step="0.1"
      min="0.1"
      [formControl]="groundSpeedControl"
      (keydown.enter)="calculate()"
    >
  </div>

  <div class="input-group">
    <label for="distance-unit">Distance Unit</label>
    <select id="distance-unit" [formControl]="unitControl">
      <option value="nm">Nautical Miles (NM)</option>
      <option value="km">Kilometers (km)</option>
    </select>
  </div>

  <button class="btn-primary" (click)="calculate()">Calculate</button>

  @if (errorMessage(); as message) {
    <p class="error-message" role="alert">{{ message }}</p>
  }

  @if (result(); as currentResult) {
    <div class="result" aria-live="polite">
      <h3>Results</h3>
      <div class="result-grid">
        <div class="result-value">
          <span class="label">Turn Anticipation Distance</span>
          <span id="turn-anticipation-distance" class="value">
            {{ formatDistance(currentResult.anticipationDistance) }}
          </span>
          <span class="unit">{{ unitLabel() }}</span>
        </div>
        <div class="result-value">
          <span class="label">Turn Radius</span>
          @if (currentResult.turnRadius !== null) {
            <span id="turn-radius" class="value">{{ formatDistance(currentResult.turnRadius) }}</span>
            <span class="unit">{{ unitLabel() }}</span>
          } @else {
            <span id="turn-radius" class="value">N/A</span>
            <span class="unit">0 deg turn</span>
          }
        </div>
      </div>
      <div class="result-info">
        <p id="flyby-summary">{{ resultSummary() }}</p>
      </div>
    </div>
  }
</div>
